@using System.Security.Claims
@model ITICDE.Models.Folder
@{
    ViewData["Title"] = "InnerDet";
    var user = User.FindFirstValue(ClaimTypes.NameIdentifier);
}

<h1>Inner Folders</h1>
<br />

<div>
    <a asp-action="CreateInnerFolder" asp-route-id="@Model.Id" class="btn btn-primary">Create inner Folder</a>

    <br /> <br />
    @foreach (var item in Model.InnerFolders)
    {
      
		@*<h3 ><i asp-action="InnerDet" asp-route-id="@item.Id" style="background-color:whitesmoke" class="fas fa-folder">@item.Name</i></h3>*@
        <span style="margin:10px;font-size:30px;"> <a asp-action="InnerDet" asp-route-id="@item.Id"  class="fas fa-folder" >@item.Name</a> </span>
    }
</div>


<div>
    <h2>Upload Multiple Files</h2>
    <form method="post" asp-controller="Folders" 
    asp-action="MultipleFiles" enctype="multipart/form-data" asp-route-Id="@Model.Id">
    <input type="file" name="files" multiple/>
    <button class="btn btn-primary" type="submit" >Submit</button>
    <hr />
</form>
</div>

@if(Model.Files.Count()!=0)
{
<div id="myCarousel" class="carousel slide" data-ride="carousel" data-interval="6000">
    <table class = "table-responsive table-bordered">
        <tr>
            <th width="400px" style="text-align :center">File Name </th>
            <th width="400px" style="text-align :center">File Type </th>
            

        </tr>
        @foreach (var item in Model.Files)
            {<tr>
                @{if (item.Type == ".pdf"||item.Type ==".jpg"||item.Type ==".gif"||item.Type ==".png"||item.Type ==".mp4"||item.Type ==".vlc"||item.Type==".ifc")
                    {
                                                <td style="text-align :center"><a asp-action="ViewFiles" asp-route-Id = "@item.Id" >@item.Name.Split('_').First()</a></td>
                        }
                        else
                        {
                                                <td style="text-align :center">@item.Name.Split('_').First()</td>
                        }
                    }
                
                    
                    <td style="text-align :center">@item.Type</td>
                    <td ><a href="/Folders/DownloadFile?fileName=@item.Name" class="btn btn-primary">Download</a></td>
                    <td ><a href="/Folders/DeleteFile?Id=@item.Id" class="btn btn-outline-danger">Delete</a></td>
                </tr>
            }
    </table>
</div>
}
